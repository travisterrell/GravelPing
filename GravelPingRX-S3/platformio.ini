[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 921600
monitor_speed = 115200

; Overrides for ESP32-S3 Super Mini
board_build.flash_size = 4MB
board_build.partitions = default.csv
board_upload.flash_size = 4MB

lib_deps = 
    bblanchon/ArduinoJson@^7.4.2
    fastled/FastLED@^3.10.3
    bertmelis/espMqttClient@^1.7.0

; For OTA (wireless) upload, uncomment these lines:
; upload_protocol = espota
; upload_port = 192.168.1.131
; upload_flags = 
;     --port=3232
;     --auth=gravelping

build_flags = 
    -D ARDUINO_USB_MODE=1
    -D ARDUINO_USB_CDC_ON_BOOT=1
    
    ; Enable dual-core support
    -D CONFIG_FREERTOS_UNICORE=0
    
    ; Suppress warnings from third-party libraries
    -Wno-deprecated-declarations
    
    ; WiFi Configuration
    -D WIFI_SSID=wifiSSID
    -D WIFI_PASSWORD=wifiPassword

    ; MQTT Configuration
    -D MQTT_BROKER=192.168.1.175
    -D MQTT_PORT=1883
    -D MQTT_USER=mqttUser
    -D MQTT_PASSWORD=mqttPassword

    ; Device Configuration
    -D DEVICE_NAME=GravelPing-S3
    
    ; Feature flags
    -D ENABLE_BATTERY_MONITORING=0
    -D ENABLE_OTA_UPDATES=1
    
    ; OTA Configuration
    -D OTA_HOSTNAME=GravelPing-S3
    -D OTA_PASSWORD=gravelping
    
    ; Board-specific (ESP32-S3 Super Mini)
    -D BOARD_HAS_PSRAM=false
